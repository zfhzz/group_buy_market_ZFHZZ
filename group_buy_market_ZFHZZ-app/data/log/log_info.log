26-03-01.16:26:24.003 [main            ] INFO  MarketTradeControllerTest - Starting MarketTradeControllerTest using Java 1.8.0_391 on LAPTOP-EK831I6O with PID 2712 (started by ZFHZZ in E:\java_project\group_buy_market_ZFHZZ\group_buy_market_ZFHZZ-app)
26-03-01.16:26:24.003 [main            ] INFO  MarketTradeControllerTest - The following 1 profile is active: "dev"
26-03-01.16:26:26.003 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
26-03-01.16:26:26.005 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
26-03-01.16:26:26.036 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 0 Redis repository interfaces.
26-03-01.16:26:26.254 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.bugstack.config.RedisClientConfig$$EnhancerBySpringCGLIB$$c5952716] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
26-03-01.16:26:26.546 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.bugstack.config.RedisClientConfigProperties' of type [cn.bugstack.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
26-03-01.16:26:27.264 [main            ] INFO  Version                - Redisson 3.26.0
26-03-01.16:26:28.025 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 192.168.3.245/192.168.3.245:16379
26-03-01.16:26:28.122 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 192.168.3.245/192.168.3.245:16379
26-03-01.16:26:28.157 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
26-03-01.16:26:30.044 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
26-03-01.16:26:30.084 [main            ] INFO  MarketTradeControllerTest - Started MarketTradeControllerTest in 6.42 seconds (JVM running for 7.37)
26-03-01.16:26:30.486 [main            ] INFO  MarketTradeController  - 营销交易锁单:xfg02 LockMarketPayOrderRequestDTO:{"activityId":100123,"channel":"c01","goodsId":"9890001","outTradeNo":"719131029229","source":"s01","userId":"xfg02"}
26-03-01.16:26:30.487 [main            ] INFO  TradeOrderService      - 拼团交易-查询未支付营销订单:xfg02 outTradeNo:719131029229
26-03-01.16:26:30.510 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
26-03-01.16:26:31.456 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
26-03-01.16:26:31.485 [main            ] INFO  RootNode               - 拼团商品查询试算服务-RootNode userId:xfg02 requestParameter:{"activityId":100123,"channel":"c01","goodsId":"9890001","source":"s01","userId":"xfg02"}
26-03-01.16:26:31.510 [main            ] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode userId:xfg02 异步线程加载数据「GroupBuyActivityDiscountVO、SkuVO」完成
26-03-01.16:26:31.510 [main            ] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode userId:xfg02 requestParameter:{"activityId":100123,"channel":"c01","goodsId":"9890001","source":"s01","userId":"xfg02"}
26-03-01.16:26:31.510 [main            ] INFO  MarketNode             - 进入查询结点
26-03-01.16:26:31.522 [main            ] INFO  EndNode                - 拼团商品查询试算服务-EndNode userId:xfg02 requestParameter:{"activityId":100123,"channel":"c01","goodsId":"9890001","source":"s01","userId":"xfg02"}
26-03-01.16:26:31.524 [main            ] INFO  TradeOrderService      - 拼团交易-锁定营销优惠支付订单:xfg02 activityId:100123 goodsId:9890001
26-03-01.16:26:31.526 [main            ] INFO  ActivityUsabilityRuleFilter - 交易链过滤规则,活动的可用性校验xfg02，activity_id100123
26-03-01.16:26:31.529 [main            ] INFO  ActivityUsabilityRuleFilter - 活动的可用性校验，非可参与时间范围 activityId:100123
26-03-01.16:26:31.531 [main            ] ERROR MarketTradeController  - 营销交易锁单业务异常:xfg02 LockMarketPayOrderRequestDTO:{"activityId":100123,"channel":"c01","goodsId":"9890001","outTradeNo":"719131029229","source":"s01","userId":"xfg02"}
cn.bugstack.types.exception.AppException: null
	at cn.bugstack.domain.trade.service.filter.ActivityUsabilityRuleFilter.apply(ActivityUsabilityRuleFilter.java:42)
	at cn.bugstack.domain.trade.service.filter.ActivityUsabilityRuleFilter.apply(ActivityUsabilityRuleFilter.java:18)
	at cn.bugstack.types.design.framework.link.model2.chain.BusinessLinkedList.apply(BusinessLinkedList.java:22)
	at cn.bugstack.domain.trade.service.TradeOrderService.lockMarketPayOrder(TradeOrderService.java:41)
	at cn.bugstack.trigger.http.MarketTradeController.lockMarketPayOrder(MarketTradeController.java:101)
	at cn.bugstack.test.trigger.MarketTradeControllerTest.test_lockMarketPayOrder(MarketTradeControllerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:237)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)
26-03-01.16:26:31.534 [main            ] INFO  MarketTradeControllerTest - 测试结果 req:{"activityId":100123,"channel":"c01","goodsId":"9890001","outTradeNo":"719131029229","source":"s01","userId":"xfg02"} res:{"code":"E0102"}
26-03-01.16:26:31.556 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
26-03-01.16:26:31.566 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
26-03-01.16:28:22.022 [main            ] INFO  MarketTradeControllerTest - Starting MarketTradeControllerTest using Java 1.8.0_391 on LAPTOP-EK831I6O with PID 18788 (started by ZFHZZ in E:\java_project\group_buy_market_ZFHZZ\group_buy_market_ZFHZZ-app)
26-03-01.16:28:22.023 [main            ] INFO  MarketTradeControllerTest - The following 1 profile is active: "dev"
26-03-01.16:28:23.034 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
26-03-01.16:28:23.039 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
26-03-01.16:28:23.091 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 34 ms. Found 0 Redis repository interfaces.
26-03-01.16:28:23.406 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.bugstack.config.RedisClientConfig$$EnhancerBySpringCGLIB$$c09f44e7] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
26-03-01.16:28:23.685 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.bugstack.config.RedisClientConfigProperties' of type [cn.bugstack.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
26-03-01.16:28:24.295 [main            ] INFO  Version                - Redisson 3.26.0
26-03-01.16:28:24.818 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 192.168.3.245/192.168.3.245:16379
26-03-01.16:28:24.829 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 192.168.3.245/192.168.3.245:16379
26-03-01.16:28:24.880 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
26-03-01.16:28:27.127 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
26-03-01.16:28:27.166 [main            ] INFO  MarketTradeControllerTest - Started MarketTradeControllerTest in 5.576 seconds (JVM running for 6.324)
26-03-01.16:28:27.790 [main            ] INFO  MarketTradeController  - 营销交易锁单:xfg02 LockMarketPayOrderRequestDTO:{"activityId":100123,"channel":"c01","goodsId":"9890001","outTradeNo":"890602279465","source":"s01","userId":"xfg02"}
26-03-01.16:28:27.790 [main            ] INFO  TradeOrderService      - 拼团交易-查询未支付营销订单:xfg02 outTradeNo:890602279465
26-03-01.16:28:27.807 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
26-03-01.16:28:28.381 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
26-03-01.16:28:28.415 [main            ] INFO  RootNode               - 拼团商品查询试算服务-RootNode userId:xfg02 requestParameter:{"activityId":100123,"channel":"c01","goodsId":"9890001","source":"s01","userId":"xfg02"}
26-03-01.16:28:28.434 [main            ] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode userId:xfg02 异步线程加载数据「GroupBuyActivityDiscountVO、SkuVO」完成
26-03-01.16:28:28.434 [main            ] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode userId:xfg02 requestParameter:{"activityId":100123,"channel":"c01","goodsId":"9890001","source":"s01","userId":"xfg02"}
26-03-01.16:28:28.434 [main            ] INFO  MarketNode             - 进入查询结点
26-03-01.16:28:28.440 [main            ] INFO  EndNode                - 拼团商品查询试算服务-EndNode userId:xfg02 requestParameter:{"activityId":100123,"channel":"c01","goodsId":"9890001","source":"s01","userId":"xfg02"}
26-03-01.16:28:28.443 [main            ] INFO  TradeOrderService      - 拼团交易-锁定营销优惠支付订单:xfg02 activityId:100123 goodsId:9890001
26-03-01.16:28:28.444 [main            ] INFO  ActivityUsabilityRuleFilter - 交易链过滤规则,活动的可用性校验xfg02，activity_id100123
26-03-01.16:28:28.448 [main            ] INFO  UserTaskLimitRuleFilter - 交易规则过滤-用户参与次数校验xfg02 activityId:100123
26-03-01.16:28:28.481 [main            ] INFO  MarketTradeController  - 交易锁单记录(新):xfg02 marketPayOrderEntity:{"deductionPrice":10.00,"orderId":"678446594080","tradeOrderStatusEnumVO":"CREATE"}
26-03-01.16:28:28.485 [main            ] INFO  MarketTradeControllerTest - 测试结果 req:{"activityId":100123,"channel":"c01","goodsId":"9890001","outTradeNo":"890602279465","source":"s01","userId":"xfg02"} res:{"code":"0000","data":{"deductionPrice":10.00,"orderId":"678446594080","tradeOrderStatus":0},"info":"成功"}
26-03-01.16:28:28.495 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
26-03-01.16:28:28.504 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
26-03-01.16:31:20.914 [main            ] INFO  MarketTradeControllerTest - Starting MarketTradeControllerTest using Java 1.8.0_391 on LAPTOP-EK831I6O with PID 8088 (started by ZFHZZ in E:\java_project\group_buy_market_ZFHZZ\group_buy_market_ZFHZZ-app)
26-03-01.16:31:20.914 [main            ] INFO  MarketTradeControllerTest - The following 1 profile is active: "dev"
26-03-01.16:31:21.569 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
26-03-01.16:31:21.571 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
26-03-01.16:31:21.606 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 0 Redis repository interfaces.
26-03-01.16:31:22.002 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.bugstack.config.RedisClientConfig$$EnhancerBySpringCGLIB$$8611a4cb] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
26-03-01.16:31:22.396 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.bugstack.config.RedisClientConfigProperties' of type [cn.bugstack.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
26-03-01.16:31:23.306 [main            ] INFO  Version                - Redisson 3.26.0
26-03-01.16:31:23.843 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 192.168.3.245/192.168.3.245:16379
26-03-01.16:31:23.855 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 192.168.3.245/192.168.3.245:16379
26-03-01.16:31:23.922 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
26-03-01.16:31:26.657 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
26-03-01.16:31:26.693 [main            ] INFO  MarketTradeControllerTest - Started MarketTradeControllerTest in 6.056 seconds (JVM running for 6.735)
26-03-01.16:31:26.983 [main            ] INFO  MarketTradeController  - 营销交易锁单:xiaofuge LockMarketPayOrderRequestDTO:{"activityId":100123,"channel":"c01","goodsId":"9890001","outTradeNo":"521503206439","source":"s01","teamId":"37242556","userId":"xiaofuge"}
26-03-01.16:31:26.984 [main            ] INFO  TradeOrderService      - 拼团交易-查询未支付营销订单:xiaofuge outTradeNo:521503206439
26-03-01.16:31:27.009 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
26-03-01.16:31:27.714 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
26-03-01.16:31:27.744 [main            ] INFO  TradeOrderService      - 拼团交易-查询拼单进度:37242556
26-03-01.16:31:27.750 [main            ] INFO  RootNode               - 拼团商品查询试算服务-RootNode userId:xiaofuge requestParameter:{"activityId":100123,"channel":"c01","goodsId":"9890001","source":"s01","userId":"xiaofuge"}
26-03-01.16:31:27.771 [main            ] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode userId:xiaofuge 异步线程加载数据「GroupBuyActivityDiscountVO、SkuVO」完成
26-03-01.16:31:27.771 [main            ] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode userId:xiaofuge requestParameter:{"activityId":100123,"channel":"c01","goodsId":"9890001","source":"s01","userId":"xiaofuge"}
26-03-01.16:31:27.771 [main            ] INFO  MarketNode             - 进入查询结点
26-03-01.16:31:27.777 [main            ] INFO  TagNode                - 该用户已经在redis当中存在了
26-03-01.16:31:27.777 [main            ] INFO  EndNode                - 拼团商品查询试算服务-EndNode userId:xiaofuge requestParameter:{"activityId":100123,"channel":"c01","goodsId":"9890001","source":"s01","userId":"xiaofuge"}
26-03-01.16:31:27.780 [main            ] INFO  TradeOrderService      - 拼团交易-锁定营销优惠支付订单:xiaofuge activityId:100123 goodsId:9890001
26-03-01.16:31:27.780 [main            ] INFO  ActivityUsabilityRuleFilter - 交易链过滤规则,活动的可用性校验xiaofuge，activity_id100123
26-03-01.16:31:27.783 [main            ] INFO  UserTaskLimitRuleFilter - 交易规则过滤-用户参与次数校验xiaofuge activityId:100123
26-03-01.16:31:27.787 [main            ] INFO  UserTaskLimitRuleFilter - 用户参与次数校验，已达可参与上限 activityId:100123
26-03-01.16:31:27.790 [main            ] ERROR MarketTradeController  - 营销交易锁单业务异常:xiaofuge LockMarketPayOrderRequestDTO:{"activityId":100123,"channel":"c01","goodsId":"9890001","outTradeNo":"521503206439","source":"s01","teamId":"37242556","userId":"xiaofuge"}
cn.bugstack.types.exception.AppException: null
	at cn.bugstack.domain.trade.service.filter.UserTaskLimitRuleFilter.apply(UserTaskLimitRuleFilter.java:35)
	at cn.bugstack.domain.trade.service.filter.UserTaskLimitRuleFilter.apply(UserTaskLimitRuleFilter.java:16)
	at cn.bugstack.types.design.framework.link.model2.chain.BusinessLinkedList.apply(BusinessLinkedList.java:22)
	at cn.bugstack.domain.trade.service.TradeOrderService.lockMarketPayOrder(TradeOrderService.java:41)
	at cn.bugstack.trigger.http.MarketTradeController.lockMarketPayOrder(MarketTradeController.java:101)
	at cn.bugstack.test.trigger.MarketTradeControllerTest.test_lockMarketPayOrder_teamId_not_null(MarketTradeControllerTest.java:57)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:237)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)
26-03-01.16:31:27.793 [main            ] INFO  MarketTradeControllerTest - 测试结果 req:{"activityId":100123,"channel":"c01","goodsId":"9890001","outTradeNo":"521503206439","source":"s01","teamId":"37242556","userId":"xiaofuge"} res:{"code":"E0103"}
26-03-01.16:31:27.804 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
26-03-01.16:31:27.809 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
26-03-01.16:32:44.066 [main            ] INFO  MarketTradeControllerTest - Starting MarketTradeControllerTest using Java 1.8.0_391 on LAPTOP-EK831I6O with PID 15988 (started by ZFHZZ in E:\java_project\group_buy_market_ZFHZZ\group_buy_market_ZFHZZ-app)
26-03-01.16:32:44.068 [main            ] INFO  MarketTradeControllerTest - The following 1 profile is active: "dev"
26-03-01.16:32:44.649 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
26-03-01.16:32:44.651 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
26-03-01.16:32:44.677 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 17 ms. Found 0 Redis repository interfaces.
26-03-01.16:32:44.892 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.bugstack.config.RedisClientConfig$$EnhancerBySpringCGLIB$$c5952716] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
26-03-01.16:32:45.190 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.bugstack.config.RedisClientConfigProperties' of type [cn.bugstack.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
26-03-01.16:32:45.849 [main            ] INFO  Version                - Redisson 3.26.0
26-03-01.16:32:46.490 [redisson-netty-1-5] INFO  ConnectionsHolder      - 1 connections initialized for 192.168.3.245/192.168.3.245:16379
26-03-01.16:32:46.512 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 192.168.3.245/192.168.3.245:16379
26-03-01.16:32:46.650 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
26-03-01.16:32:48.968 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
26-03-01.16:32:49.012 [main            ] INFO  MarketTradeControllerTest - Started MarketTradeControllerTest in 5.254 seconds (JVM running for 5.937)
26-03-01.16:32:49.457 [main            ] INFO  MarketTradeController  - 营销交易锁单:xiaofuge03 LockMarketPayOrderRequestDTO:{"activityId":100123,"channel":"c01","goodsId":"9890001","outTradeNo":"414201162281","source":"s01","teamId":"37242556","userId":"xiaofuge03"}
26-03-01.16:32:49.458 [main            ] INFO  TradeOrderService      - 拼团交易-查询未支付营销订单:xiaofuge03 outTradeNo:414201162281
26-03-01.16:32:49.478 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
26-03-01.16:32:50.145 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
26-03-01.16:32:50.169 [main            ] INFO  TradeOrderService      - 拼团交易-查询拼单进度:37242556
26-03-01.16:32:50.179 [main            ] INFO  RootNode               - 拼团商品查询试算服务-RootNode userId:xiaofuge03 requestParameter:{"activityId":100123,"channel":"c01","goodsId":"9890001","source":"s01","userId":"xiaofuge03"}
26-03-01.16:32:50.200 [main            ] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode userId:xiaofuge03 异步线程加载数据「GroupBuyActivityDiscountVO、SkuVO」完成
26-03-01.16:32:50.201 [main            ] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode userId:xiaofuge03 requestParameter:{"activityId":100123,"channel":"c01","goodsId":"9890001","source":"s01","userId":"xiaofuge03"}
26-03-01.16:32:50.201 [main            ] INFO  MarketNode             - 进入查询结点
26-03-01.16:32:50.206 [main            ] INFO  EndNode                - 拼团商品查询试算服务-EndNode userId:xiaofuge03 requestParameter:{"activityId":100123,"channel":"c01","goodsId":"9890001","source":"s01","userId":"xiaofuge03"}
26-03-01.16:32:50.209 [main            ] INFO  TradeOrderService      - 拼团交易-锁定营销优惠支付订单:xiaofuge03 activityId:100123 goodsId:9890001
26-03-01.16:32:50.210 [main            ] INFO  ActivityUsabilityRuleFilter - 交易链过滤规则,活动的可用性校验xiaofuge03，activity_id100123
26-03-01.16:32:50.212 [main            ] INFO  UserTaskLimitRuleFilter - 交易规则过滤-用户参与次数校验xiaofuge03 activityId:100123
26-03-01.16:32:50.242 [main            ] INFO  MarketTradeController  - 交易锁单记录(新):xiaofuge03 marketPayOrderEntity:{"deductionPrice":10.00,"orderId":"838015000901","tradeOrderStatusEnumVO":"CREATE"}
26-03-01.16:32:50.246 [main            ] INFO  MarketTradeControllerTest - 测试结果 req:{"activityId":100123,"channel":"c01","goodsId":"9890001","outTradeNo":"414201162281","source":"s01","teamId":"37242556","userId":"xiaofuge03"} res:{"code":"0000","data":{"deductionPrice":10.00,"orderId":"838015000901","tradeOrderStatus":0},"info":"成功"}
26-03-01.16:32:50.259 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
26-03-01.16:32:50.282 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
26-03-01.16:33:10.181 [main            ] INFO  MarketTradeControllerTest - Starting MarketTradeControllerTest using Java 1.8.0_391 on LAPTOP-EK831I6O with PID 14064 (started by ZFHZZ in E:\java_project\group_buy_market_ZFHZZ\group_buy_market_ZFHZZ-app)
26-03-01.16:33:10.181 [main            ] INFO  MarketTradeControllerTest - The following 1 profile is active: "dev"
26-03-01.16:33:10.789 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
26-03-01.16:33:10.791 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
26-03-01.16:33:10.824 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 0 Redis repository interfaces.
26-03-01.16:33:11.077 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.bugstack.config.RedisClientConfig$$EnhancerBySpringCGLIB$$c09f44e7] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
26-03-01.16:33:11.347 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.bugstack.config.RedisClientConfigProperties' of type [cn.bugstack.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
26-03-01.16:33:11.941 [main            ] INFO  Version                - Redisson 3.26.0
26-03-01.16:33:12.612 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 192.168.3.245/192.168.3.245:16379
26-03-01.16:33:12.637 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 192.168.3.245/192.168.3.245:16379
26-03-01.16:33:12.739 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
26-03-01.16:33:14.975 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
26-03-01.16:33:15.010 [main            ] INFO  MarketTradeControllerTest - Started MarketTradeControllerTest in 5.116 seconds (JVM running for 5.863)
26-03-01.16:33:15.491 [main            ] INFO  MarketTradeController  - 营销交易锁单:xiaofuge03 LockMarketPayOrderRequestDTO:{"activityId":100123,"channel":"c01","goodsId":"9890001","outTradeNo":"546724024144","source":"s01","teamId":"37242556","userId":"xiaofuge03"}
26-03-01.16:33:15.491 [main            ] INFO  TradeOrderService      - 拼团交易-查询未支付营销订单:xiaofuge03 outTradeNo:546724024144
26-03-01.16:33:15.515 [main            ] INFO  HikariDataSource       - HikariPool-1 - Starting...
26-03-01.16:33:16.258 [main            ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
26-03-01.16:33:16.281 [main            ] INFO  TradeOrderService      - 拼团交易-查询拼单进度:37242556
26-03-01.16:33:16.287 [main            ] INFO  RootNode               - 拼团商品查询试算服务-RootNode userId:xiaofuge03 requestParameter:{"activityId":100123,"channel":"c01","goodsId":"9890001","source":"s01","userId":"xiaofuge03"}
26-03-01.16:33:16.302 [main            ] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode userId:xiaofuge03 异步线程加载数据「GroupBuyActivityDiscountVO、SkuVO」完成
26-03-01.16:33:16.302 [main            ] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode userId:xiaofuge03 requestParameter:{"activityId":100123,"channel":"c01","goodsId":"9890001","source":"s01","userId":"xiaofuge03"}
26-03-01.16:33:16.302 [main            ] INFO  MarketNode             - 进入查询结点
26-03-01.16:33:16.307 [main            ] INFO  EndNode                - 拼团商品查询试算服务-EndNode userId:xiaofuge03 requestParameter:{"activityId":100123,"channel":"c01","goodsId":"9890001","source":"s01","userId":"xiaofuge03"}
26-03-01.16:33:16.311 [main            ] INFO  TradeOrderService      - 拼团交易-锁定营销优惠支付订单:xiaofuge03 activityId:100123 goodsId:9890001
26-03-01.16:33:16.312 [main            ] INFO  ActivityUsabilityRuleFilter - 交易链过滤规则,活动的可用性校验xiaofuge03，activity_id100123
26-03-01.16:33:16.315 [main            ] INFO  UserTaskLimitRuleFilter - 交易规则过滤-用户参与次数校验xiaofuge03 activityId:100123
26-03-01.16:33:16.318 [main            ] INFO  UserTaskLimitRuleFilter - 用户参与次数校验，已达可参与上限 activityId:100123
26-03-01.16:33:16.320 [main            ] ERROR MarketTradeController  - 营销交易锁单业务异常:xiaofuge03 LockMarketPayOrderRequestDTO:{"activityId":100123,"channel":"c01","goodsId":"9890001","outTradeNo":"546724024144","source":"s01","teamId":"37242556","userId":"xiaofuge03"}
cn.bugstack.types.exception.AppException: null
	at cn.bugstack.domain.trade.service.filter.UserTaskLimitRuleFilter.apply(UserTaskLimitRuleFilter.java:35)
	at cn.bugstack.domain.trade.service.filter.UserTaskLimitRuleFilter.apply(UserTaskLimitRuleFilter.java:16)
	at cn.bugstack.types.design.framework.link.model2.chain.BusinessLinkedList.apply(BusinessLinkedList.java:22)
	at cn.bugstack.domain.trade.service.TradeOrderService.lockMarketPayOrder(TradeOrderService.java:41)
	at cn.bugstack.trigger.http.MarketTradeController.lockMarketPayOrder(MarketTradeController.java:101)
	at cn.bugstack.test.trigger.MarketTradeControllerTest.test_lockMarketPayOrder_teamId_not_null(MarketTradeControllerTest.java:57)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:237)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)
26-03-01.16:33:16.322 [main            ] INFO  MarketTradeControllerTest - 测试结果 req:{"activityId":100123,"channel":"c01","goodsId":"9890001","outTradeNo":"546724024144","source":"s01","teamId":"37242556","userId":"xiaofuge03"} res:{"code":"E0103"}
26-03-01.16:33:16.333 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
26-03-01.16:33:16.337 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
